@page "/life"
@using kajiApp_blazor.Components.Component.LifeComponent
@using kajiApp_blazor.Components.Models.LifeModel
@using kajiApp_blazor.Components.DatabaseContext.LifeDBC
@rendermode @(new InteractiveServerRenderMode(prerender:false))
@using kajiApp_blazor.Components
@inject NavigationManager Navigation
@inject HttpClient Http
@inject IConfiguration Configuration

    <div class="px-3">
        <LifeRecordList LifeRecord="liferecord"  />
    </div>

@code {
    private List<LifeRecord>? liferecord = null;

    //非同期で実績リスト取得
    protected override async Task OnInitializedAsync()
    {
        //家事実績リストをDBから持ってくる。入力フォームさえできてればOKなので非同期で取得する
        _ = LoadLifeAsync();
    }
    /// <summary>
    ///Eatリスト取得非同期
    /// </summary>
    /// <returns></returns>
    private async Task LoadLifeAsync()
    {
        var lifeRecordShow = new DatabaseContext.LifeDBC.LifeRecordShow();
        liferecord = await lifeRecordShow.GetLifeAsync();
        if (liferecord != null)
        {
            //worklistに値が入ったらUI更新
            await InvokeAsync(StateHasChanged);
        }
    }
}